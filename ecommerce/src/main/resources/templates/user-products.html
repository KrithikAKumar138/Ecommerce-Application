<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>User Products</title>
    <meta charset="UTF-8">

    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --bg: #f4f6fb;
            --text: #0f172a;
            --muted: #64748b;
            --card: #ffffff;
            --success: #16a34a;
            --danger: #dc2626;
            --shadow: 0 10px 25px rgba(0,0,0,0.08);
            --radius: 14px;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
        }

        a { text-decoration: none; color: inherit; }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px 20px 40px;
        }


        .page-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .back-link {
            color: var(--primary);
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .page-title {
            font-size: 20px;
            font-weight: 400;
        }


        .products-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        .product-card {
            background: var(--card);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: transform 0.15s ease, box-shadow 0.15s ease;
        }

        .product-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 14px 30px rgba(0,0,0,0.12);
        }

        .product-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: #f1f5f9;
        }

        .product-body {
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            flex: 1;
        }

        .product-body h3 {
            margin: 0;
            font-size: 18px;
        }

        .price {
            color: var(--primary);
            font-weight: 800;
            font-size: 20px;
        }

        .stock {
            font-size: 12px;
            font-weight: bold;
            padding: 4px 10px;
            border-radius: 999px;
            display: inline-block;
            width: fit-content;
            color: #fff;
        }

        .stock.in { background: var(--success); }
        .stock.out { background: var(--danger); }

        .actions {
            margin-top: auto;
            display: flex;
            gap: 10px;
        }

        .btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 700;
            text-align: center;
        }

        .btn-outline {
            background: #eef2ff;
            color: var(--primary);
        }

        .btn-outline:hover {
            background: #e0e7ff;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }


        @media (max-width: 1000px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .products-grid {
                grid-template-columns: 1fr;
            }

            .page-top {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }

        .navbar {
          background: #fff;
          box-shadow: 0 2px 12px rgba(0,0,0,0.06);
          position: sticky;
          top: 0;
          z-index: 10;
        }

        .nav-inner {
          max-width: 1200px;
          margin: 0 auto;
          padding: 14px 20px;
          display: grid;
          grid-template-columns: 1fr auto 1fr;  /* left | center | right */
          align-items: center;
        }

        .brand {
          justify-self: start;
          font-weight: 800;
          font-size: 22px;
          color: var(--primary);
        }

        .nav-links {
          justify-self: center;
          display: flex;
          gap: 24px;
          align-items: center;
          color: var(--muted);
          font-weight: 600;
        }

        .nav-links a:hover {
          color: var(--primary);
        }

        .nav-actions {
          justify-self: end;
        }

        .back-link {
          color: var(--primary);
          font-weight: 600;
        }

        .back-link:hover {
          text-decoration: underline;
        }


    </style>
</head>
<body>

<div class="navbar">
    <div class="nav-inner">


        <div class="brand">üõí E-Store</div>

        <div class="nav-links">
            <a th:href="@{/user/dashboard}">Home</a>
            <a th:href="@{/user/orders}">My Orders</a>
            <a th:href="@{/cart}">Cart üõí</a>
        </div>

        <div class="nav-actions">
            <a class="back-link" th:href="@{/user/dashboard}">‚Üê Back</a>
        </div>

    </div>
</div>


<div class="container">

    <div class="page-top">

        <div class="page-title"
             th:text="${selectedCategory != null ? selectedCategory + ' Products' : 'All Products'}">
            All Products
        </div>
    </div>


    <div class="products-grid">
        <div class="product-card" th:each="p : ${products}">
            <img th:src="${p.coverImage != null ? '/uploads/' + p.coverImage : '/images/product-placeholder.png'}"
                 alt="Product">

            <div class="product-body">
                <h3 th:text="${p.name}">Product Name</h3>

                <div class="price">‚Çπ <span th:text="${p.price}">0</span></div>

                <span class="stock in" th:if="${p.stock > 0}">In Stock</span>
                <span class="stock out" th:if="${p.stock == 0}">Out of Stock</span>

                <div class="actions">
                    <a class="btn btn-outline"
                       th:href="@{/products/{id}(id=${p.id})}">
                        View Details
                    </a>

                    <form th:action="@{/cart/add/{id}(id=${p.id})}" method="post" style="margin:0;">
                        <button class="btn btn-primary" type="submit">Add to Cart</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

</div>

</body>
</html>
